all: presentation.pdf
.PHONY: all clean

presentation.pdf: presentation.tex vc.tex
	pdflatex presentation.tex

vc.tex: ../.git/logs/HEAD
	echo "%%% This file is generated by Makefile." > vc.tex
	echo "%%% Do not edit this file!\n%%%" >> vc.tex
	git log -1 --format="format:\
		\\gdef\\GITAuthorDate{%ad}\
		\\gdef\\GITAbrHash{%h}\
		\\gdef\\GITAuthorName{%an}"\
		| sed 's/š/\\v{s}/g' | sed 's/ł/\\l\\ /g' >> vc.tex

clean:
	rm -f vc.tex
	rm -f presentation.pdf
	rm -f presentation.log
	rm -f presentation.aux
	rm -f presentation.out
	rm -f presentation.snm
	rm -f presentation.toc
	rm -f presentation.nav
